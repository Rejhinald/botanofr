{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arwin Miclat\\\\Desktop\\\\Botano\\\\Botano\\\\botano\\\\src\\\\screens\\\\Orderscreen.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { getOrderDetails, payOrder } from \"../actions/orderAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Orderscreen(_ref) {\n  _s();\n  let {\n    match\n  } = _ref;\n  const orderId = match.params.id;\n  const [sdkReady, setSdkReady] = useState(false);\n  const dispatch = useDispatch();\n  const addPayPalScript = () => {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = \"https://www.paypal.com/sdk/js?client-id=AaucYPMaRFUh-_oxSoxOl5wSEZEgHaFUfVqopKBgVd2kabPxvSmW1j6ZZymBkLq7y8ryclXS9YvVLQWwB&currency=USD\";\n    script.async = true;\n    script.onload = () => {\n      setSdkReady(true);\n    };\n    document.body.appendChild(script);\n  };\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    order,\n    loading,\n    error\n  } = orderDetails;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = orderPay;\n  useEffect(() => {\n    if (!order || successPay || order._id !== orderId) {\n      dispatch(getOrderDetails(orderId));\n    } else if (!order.isPaid) {\n      if (!window.paypal) {\n        addPayPalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [dispatch, orderId, order, successPay]);\n  const successPaymentHandler = paymentResult => {\n    dispatch(payOrder(orderId, paymentResult));\n  };\n  return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n    children: [loadingPay && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 22\n    }, this), !order.isPaid && sdkReady ? /*#__PURE__*/_jsxDEV(PayPalButton, {\n      amount: order.totalPrice,\n      onSuccess: successPaymentHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(Orderscreen, \"1JfT2sP9dmRfJuspJwy5IBqpW7g=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Orderscreen;\nexport default Orderscreen;\nvar _c;\n$RefreshReg$(_c, \"Orderscreen\");","map":{"version":3,"names":["React","useEffect","useState","PayPalButton","useDispatch","useSelector","Loader","ListGroup","getOrderDetails","payOrder","Orderscreen","match","orderId","params","id","sdkReady","setSdkReady","dispatch","addPayPalScript","script","document","createElement","type","src","async","onload","body","appendChild","orderDetails","state","order","loading","error","orderPay","loadingPay","success","successPay","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","totalPrice"],"sources":["C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/src/screens/Orderscreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../components/Loader\";\r\nimport { ListGroup } from \"react-bootstrap\";\r\nimport { getOrderDetails, payOrder } from \"../actions/orderAction\";\r\n\r\nfunction Orderscreen({ match }) {\r\n  const orderId = match.params.id;\r\n\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const addPayPalScript = () => {\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.src =\r\n      \"https://www.paypal.com/sdk/js?client-id=AaucYPMaRFUh-_oxSoxOl5wSEZEgHaFUfVqopKBgVd2kabPxvSmW1j6ZZymBkLq7y8ryclXS9YvVLQWwB&currency=USD\";\r\n    script.async = true;\r\n    script.onload = () => {\r\n      setSdkReady(true);\r\n    };\r\n    document.body.appendChild(script);\r\n  };\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails);\r\n  const { order, loading, error } = orderDetails;\r\n\r\n  const orderPay = useSelector((state) => state.orderPay);\r\n  const { loading: loadingPay, success: successPay } = orderPay;\r\n\r\n  useEffect(() => {\r\n    if (!order || successPay || order._id !== orderId) {\r\n      dispatch(getOrderDetails(orderId));\r\n    } else if (!order.isPaid) {\r\n      if (!window.paypal) {\r\n        addPayPalScript();\r\n      } else {\r\n        setSdkReady(true);\r\n      }\r\n    }\r\n  }, [dispatch, orderId, order, successPay]);\r\n\r\n  const successPaymentHandler = (paymentResult) => {\r\n    dispatch(payOrder(orderId, paymentResult));\r\n  };\r\n\r\n  return (\r\n    <ListGroup.Item>\r\n      {loadingPay && <Loader />}\r\n      {!order.isPaid && sdkReady ? (\r\n        <PayPalButton\r\n          amount={order.totalPrice}\r\n          onSuccess={successPaymentHandler}\r\n        />\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </ListGroup.Item>\r\n  );\r\n}\r\n\r\nexport default Orderscreen;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,eAAe,EAAEC,QAAQ,QAAQ,wBAAwB;AAAC;AAEnE,SAASC,WAAW,OAAY;EAAA;EAAA,IAAX;IAAEC;EAAM,CAAC;EAC5B,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAM,CAACC,EAAE;EAE/B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMe,QAAQ,GAAGb,WAAW,EAAE;EAE9B,MAAMc,eAAe,GAAG,MAAM;IAC5B,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,IAAI,GAAG,iBAAiB;IAC/BH,MAAM,CAACI,GAAG,GACR,wIAAwI;IAC1IJ,MAAM,CAACK,KAAK,GAAG,IAAI;IACnBL,MAAM,CAACM,MAAM,GAAG,MAAM;MACpBT,WAAW,CAAC,IAAI,CAAC;IACnB,CAAC;IACDI,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,MAAM,CAAC;EACnC,CAAC;EAED,MAAMS,YAAY,GAAGvB,WAAW,CAAEwB,KAAK,IAAKA,KAAK,CAACD,YAAY,CAAC;EAC/D,MAAM;IAAEE,KAAK;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGJ,YAAY;EAE9C,MAAMK,QAAQ,GAAG5B,WAAW,CAAEwB,KAAK,IAAKA,KAAK,CAACI,QAAQ,CAAC;EACvD,MAAM;IAAEF,OAAO,EAAEG,UAAU;IAAEC,OAAO,EAAEC;EAAW,CAAC,GAAGH,QAAQ;EAE7DhC,SAAS,CAAC,MAAM;IACd,IAAI,CAAC6B,KAAK,IAAIM,UAAU,IAAIN,KAAK,CAACO,GAAG,KAAKzB,OAAO,EAAE;MACjDK,QAAQ,CAACT,eAAe,CAACI,OAAO,CAAC,CAAC;IACpC,CAAC,MAAM,IAAI,CAACkB,KAAK,CAACQ,MAAM,EAAE;MACxB,IAAI,CAACC,MAAM,CAACC,MAAM,EAAE;QAClBtB,eAAe,EAAE;MACnB,CAAC,MAAM;QACLF,WAAW,CAAC,IAAI,CAAC;MACnB;IACF;EACF,CAAC,EAAE,CAACC,QAAQ,EAAEL,OAAO,EAAEkB,KAAK,EAAEM,UAAU,CAAC,CAAC;EAE1C,MAAMK,qBAAqB,GAAIC,aAAa,IAAK;IAC/CzB,QAAQ,CAACR,QAAQ,CAACG,OAAO,EAAE8B,aAAa,CAAC,CAAC;EAC5C,CAAC;EAED,oBACE,QAAC,SAAS,CAAC,IAAI;IAAA,WACZR,UAAU,iBAAI,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG,EACxB,CAACJ,KAAK,CAACQ,MAAM,IAAIvB,QAAQ,gBACxB,QAAC,YAAY;MACX,MAAM,EAAEe,KAAK,CAACa,UAAW;MACzB,SAAS,EAAEF;IAAsB;MAAA;MAAA;MAAA;IAAA,QACjC,gBAEF,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QACR;EAAA;IAAA;IAAA;IAAA;EAAA,QACc;AAErB;AAAC,GArDQ/B,WAAW;EAAA,QAIDN,WAAW,EAcPC,WAAW,EAGfA,WAAW;AAAA;AAAA,KArBrBK,WAAW;AAuDpB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}