{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import{Button}from'react-bootstrap';import{useDispatch}from\"react-redux\";import{cancelSubscription}from\"../actions/accountActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CancelSubscriptionAdmin=function CancelSubscriptionAdmin(_ref){var subscriptionId=_ref.subscriptionId,accessToken=_ref.accessToken,id=_ref.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var dispatch=useDispatch();var cancelSubscription2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://api.sandbox.paypal.com/v1/billing/subscriptions/\".concat(subscriptionId,\"/cancel\"),{reason:\"The customer requested to cancel.\",note:\"This subscription was canceled by the customer.\"},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(accessToken)}});case 3:response=_context.sent;if(response.status===204){dispatch(cancelSubscription(id));setSuccess(true);setError(null);}else{setSuccess(false);setError(response.data.error.message);}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setSuccess(false);setError(_context.t0.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function cancelSubscription2(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:cancelSubscription2,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-slash\"})}),success&&/*#__PURE__*/_jsx(\"p\",{children:\"Subscription canceled successfully.\"}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error canceling subscription: \",error]})]});};export default CancelSubscriptionAdmin;","map":{"version":3,"names":["React","useState","axios","Button","useDispatch","cancelSubscription","CancelSubscriptionAdmin","subscriptionId","accessToken","id","error","setError","success","setSuccess","dispatch","cancelSubscription2","post","reason","note","headers","Authorization","response","status","data","message"],"sources":["C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/src/components/CancelSubscriptionAdmin.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {Button} from 'react-bootstrap'\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cancelSubscription } from \"../actions/accountActions\";\r\n\r\nconst CancelSubscriptionAdmin = ({ subscriptionId, accessToken, id }) => {\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const dispatch = useDispatch()\r\n  const cancelSubscription2 = async () => {\r\n    \r\n    try {\r\n      const response = await axios.post(\r\n        `https://api.sandbox.paypal.com/v1/billing/subscriptions/${subscriptionId}/cancel`,\r\n        {\r\n          reason: \"The customer requested to cancel.\",\r\n          note: \"This subscription was canceled by the customer.\"\r\n        },\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${accessToken}`\r\n          }\r\n        }\r\n      );\r\n      if (response.status === 204) {\r\n        dispatch(cancelSubscription(id))\r\n        setSuccess(true);\r\n        setError(null);\r\n        \r\n      } else {\r\n        setSuccess(false);\r\n        setError(response.data.error.message);\r\n      }\r\n    } catch (error) {\r\n      setSuccess(false);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"danger\" onClick={cancelSubscription2}><i className=\"fas fa-slash\"></i></Button>\r\n      {success && <p>Subscription canceled successfully.</p>}\r\n      {error && <p>Error canceling subscription: {error}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CancelSubscriptionAdmin;\r\n"],"mappings":"waAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAAQC,MAAM,KAAO,iBAAiB,CACtC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,kBAAkB,KAAQ,2BAA2B,CAAC,wFAE/D,GAAMC,wBAAuB,CAAG,QAA1BA,wBAAuB,MAA4C,IAAtCC,eAAc,MAAdA,cAAc,CAAEC,WAAW,MAAXA,WAAW,CAAEC,EAAE,MAAFA,EAAE,CAChE,cAA0BR,QAAQ,CAAC,IAAI,CAAC,wCAAjCS,KAAK,eAAEC,QAAQ,eACtB,eAA8BV,QAAQ,CAAC,KAAK,CAAC,yCAAtCW,OAAO,eAAEC,UAAU,eAC1B,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAC9B,GAAMW,oBAAmB,6FAAG,uLAGDb,MAAK,CAACc,IAAI,mEAC4BT,cAAc,YACzE,CACEU,MAAM,CAAE,mCAAmC,CAC3CC,IAAI,CAAE,iDACR,CAAC,CACD,CACEC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYZ,WAAW,CACtC,CACF,CAAC,CACF,QAZKa,QAAQ,eAad,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3BR,QAAQ,CAACT,kBAAkB,CAACI,EAAE,CAAC,CAAC,CAChCI,UAAU,CAAC,IAAI,CAAC,CAChBF,QAAQ,CAAC,IAAI,CAAC,CAEhB,CAAC,IAAM,CACLE,UAAU,CAAC,KAAK,CAAC,CACjBF,QAAQ,CAACU,QAAQ,CAACE,IAAI,CAACb,KAAK,CAACc,OAAO,CAAC,CACvC,CAAC,+EAEDX,UAAU,CAAC,KAAK,CAAC,CACjBF,QAAQ,CAAC,YAAMa,OAAO,CAAC,CAAC,mEAE3B,kBA7BKT,oBAAmB,2CA6BxB,CAED,mBACE,oCACE,KAAC,MAAM,EAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAEA,mBAAoB,uBAAC,UAAG,SAAS,CAAC,cAAc,EAAK,EAAS,CAC/FH,OAAO,eAAI,mBAAG,qCAAmC,EAAI,CACrDF,KAAK,eAAI,qBAAG,gCAA8B,CAACA,KAAK,GAAK,GAClD,CAEV,CAAC,CAED,cAAeJ,wBAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}