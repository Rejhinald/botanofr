{"ast":null,"code":"import _slicedToArray from\"C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{PayPalButton}from\"react-paypal-button-v2\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import{ListGroup}from\"react-bootstrap\";import{getOrderDetails,payOrder}from\"../actions/orderAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Orderscreen(_ref){var match=_ref.match;var orderId=match.params.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sdkReady=_useState2[0],setSdkReady=_useState2[1];var dispatch=useDispatch();var addPayPalScript=function addPayPalScript(){var script=document.createElement(\"script\");script.type=\"text/javascript\";script.src=\"https://www.paypal.com/sdk/js?client-id=AaucYPMaRFUh-_oxSoxOl5wSEZEgHaFUfVqopKBgVd2kabPxvSmW1j6ZZymBkLq7y8ryclXS9YvVLQWwB&currency=USD\";script.async=true;script.onload=function(){setSdkReady(true);};document.body.appendChild(script);};var orderDetails=useSelector(function(state){return state.orderDetails;});var order=orderDetails.order,loading=orderDetails.loading,error=orderDetails.error;var orderPay=useSelector(function(state){return state.orderPay;});var loadingPay=orderPay.loading,successPay=orderPay.success;useEffect(function(){if(!order||successPay||order._id!==orderId){dispatch(getOrderDetails(orderId));}else if(!order.isPaid){if(!window.paypal){addPayPalScript();}else{setSdkReady(true);}}},[dispatch,orderId,order,successPay]);var successPaymentHandler=function successPaymentHandler(paymentResult){dispatch(payOrder(orderId,paymentResult));};return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[loadingPay&&/*#__PURE__*/_jsx(Loader,{}),!order.isPaid&&sdkReady?/*#__PURE__*/_jsx(PayPalButton,{amount:order.totalPrice,onSuccess:successPaymentHandler}):/*#__PURE__*/_jsx(Loader,{})]});}export default Orderscreen;","map":{"version":3,"names":["React","useEffect","useState","PayPalButton","useDispatch","useSelector","Loader","ListGroup","getOrderDetails","payOrder","Orderscreen","match","orderId","params","id","sdkReady","setSdkReady","dispatch","addPayPalScript","script","document","createElement","type","src","async","onload","body","appendChild","orderDetails","state","order","loading","error","orderPay","loadingPay","successPay","success","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","totalPrice"],"sources":["C:/Users/Arwin Miclat/Desktop/Botano/Botano/botano/src/screens/Orderscreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../components/Loader\";\r\nimport { ListGroup } from \"react-bootstrap\";\r\nimport { getOrderDetails, payOrder } from \"../actions/orderAction\";\r\n\r\nfunction Orderscreen({ match }) {\r\n  const orderId = match.params.id;\r\n\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const addPayPalScript = () => {\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.src =\r\n      \"https://www.paypal.com/sdk/js?client-id=AaucYPMaRFUh-_oxSoxOl5wSEZEgHaFUfVqopKBgVd2kabPxvSmW1j6ZZymBkLq7y8ryclXS9YvVLQWwB&currency=USD\";\r\n    script.async = true;\r\n    script.onload = () => {\r\n      setSdkReady(true);\r\n    };\r\n    document.body.appendChild(script);\r\n  };\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails);\r\n  const { order, loading, error } = orderDetails;\r\n\r\n  const orderPay = useSelector((state) => state.orderPay);\r\n  const { loading: loadingPay, success: successPay } = orderPay;\r\n\r\n  useEffect(() => {\r\n    if (!order || successPay || order._id !== orderId) {\r\n      dispatch(getOrderDetails(orderId));\r\n    } else if (!order.isPaid) {\r\n      if (!window.paypal) {\r\n        addPayPalScript();\r\n      } else {\r\n        setSdkReady(true);\r\n      }\r\n    }\r\n  }, [dispatch, orderId, order, successPay]);\r\n\r\n  const successPaymentHandler = (paymentResult) => {\r\n    dispatch(payOrder(orderId, paymentResult));\r\n  };\r\n\r\n  return (\r\n    <ListGroup.Item>\r\n      {loadingPay && <Loader />}\r\n      {!order.isPaid && sdkReady ? (\r\n        <PayPalButton\r\n          amount={order.totalPrice}\r\n          onSuccess={successPaymentHandler}\r\n        />\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </ListGroup.Item>\r\n  );\r\n}\r\n\r\nexport default Orderscreen;\r\n"],"mappings":"wIAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,YAAY,KAAQ,wBAAwB,CACrD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAASC,SAAS,KAAQ,iBAAiB,CAC3C,OAASC,eAAe,CAAEC,QAAQ,KAAQ,wBAAwB,CAAC,wFAEnE,QAASC,YAAW,MAAY,IAATC,MAAK,MAALA,KAAK,CAC1B,GAAMC,QAAO,CAAGD,KAAK,CAACE,MAAM,CAACC,EAAE,CAE/B,cAAgCZ,QAAQ,CAAC,KAAK,CAAC,wCAAxCa,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,SAAQ,CAAGb,WAAW,EAAE,CAE9B,GAAMc,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC5B,GAAMC,OAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,IAAI,CAAG,iBAAiB,CAC/BH,MAAM,CAACI,GAAG,CACR,wIAAwI,CAC1IJ,MAAM,CAACK,KAAK,CAAG,IAAI,CACnBL,MAAM,CAACM,MAAM,CAAG,UAAM,CACpBT,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CACDI,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,MAAM,CAAC,CACnC,CAAC,CAED,GAAMS,aAAY,CAAGvB,WAAW,CAAC,SAACwB,KAAK,QAAKA,MAAK,CAACD,YAAY,GAAC,CAC/D,GAAQE,MAAK,CAAqBF,YAAY,CAAtCE,KAAK,CAAEC,OAAO,CAAYH,YAAY,CAA/BG,OAAO,CAAEC,KAAK,CAAKJ,YAAY,CAAtBI,KAAK,CAE7B,GAAMC,SAAQ,CAAG5B,WAAW,CAAC,SAACwB,KAAK,QAAKA,MAAK,CAACI,QAAQ,GAAC,CACvD,GAAiBC,WAAU,CAA0BD,QAAQ,CAArDF,OAAO,CAAuBI,UAAU,CAAKF,QAAQ,CAAhCG,OAAO,CAEpCnC,SAAS,CAAC,UAAM,CACd,GAAI,CAAC6B,KAAK,EAAIK,UAAU,EAAIL,KAAK,CAACO,GAAG,GAAKzB,OAAO,CAAE,CACjDK,QAAQ,CAACT,eAAe,CAACI,OAAO,CAAC,CAAC,CACpC,CAAC,IAAM,IAAI,CAACkB,KAAK,CAACQ,MAAM,CAAE,CACxB,GAAI,CAACC,MAAM,CAACC,MAAM,CAAE,CAClBtB,eAAe,EAAE,CACnB,CAAC,IAAM,CACLF,WAAW,CAAC,IAAI,CAAC,CACnB,CACF,CACF,CAAC,CAAE,CAACC,QAAQ,CAAEL,OAAO,CAAEkB,KAAK,CAAEK,UAAU,CAAC,CAAC,CAE1C,GAAMM,sBAAqB,CAAG,QAAxBA,sBAAqB,CAAIC,aAAa,CAAK,CAC/CzB,QAAQ,CAACR,QAAQ,CAACG,OAAO,CAAE8B,aAAa,CAAC,CAAC,CAC5C,CAAC,CAED,mBACE,MAAC,SAAS,CAAC,IAAI,YACZR,UAAU,eAAI,KAAC,MAAM,IAAG,CACxB,CAACJ,KAAK,CAACQ,MAAM,EAAIvB,QAAQ,cACxB,KAAC,YAAY,EACX,MAAM,CAAEe,KAAK,CAACa,UAAW,CACzB,SAAS,CAAEF,qBAAsB,EACjC,cAEF,KAAC,MAAM,IACR,GACc,CAErB,CAEA,cAAe/B,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}